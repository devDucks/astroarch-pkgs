pkgname=siril
pkgver=1.4.0
pkgrel=1
beta="-beta4"
pkgdesc="An astronomical image processing software for Linux. (IRIS clone)"
arch=('aarch64' 'x86_64')
license=('GPL3')
depends=(cfitsio
         exiv2
         ffms2
         fftw
         gsl
         gtk3
         gtksourceview4
         gvfs
         json-glib
         lcms2
         libgit2
         libheif
         libjpeg
         libjxl
         libpng
         libraw
         libtiff
         libtiff
         opencv
         wcslib)
makedepends=(cmake
             meson
             ninja)
optdepends=('ffmpeg: For AVI export')
options=(!lto)

source=("https://free-astro.org/download/siril-${pkgver}${rc}${pkgrel}.tar.bz2")
sha256sums=('16a3e23d8ae40fd982f7b4bd1955f11bc63117aab4510addabd294fe5416f5a8')

build() {
  cd "$srcdir/$pkgname-$pkgver${rc}${pkgrel}/"
  meson setup --prefix /usr --buildtype release _build
  ninja -C _build
}

package() {
  cd "$srcdir/$pkgname-$pkgver${rc}${pkgrel}/"
  meson install -C _build --destdir "$pkgdir"
}
