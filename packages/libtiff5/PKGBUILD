# Maintainer: Astro Benzene <universebenzene at sina dot com>
# Maintainer: TimeTrap <844177178 at qq dot com>
# Maintainer: Levente Polyak <anthraxx at archlinux dot org>
# Contributor: Eric BÃ©langer <eric at archlinux dot org>

pkgname=libtiff5
_pkgname=tiff
pkgver=4.7.1
pkgrel=2
pkgdesc='Library for manipulation of TIFF images'
arch=('x86_64' 'aarch64')
url="http://www.simplesystems.org/libtiff"
license=('custom')
depends=('glibc'
         'libjpeg-turbo'
         'xz'
         'zlib'
         'zstd')
source=("https://download.osgeo.org/libtiff/tiff-${pkgver}.tar.gz")
sha256sums=('f698d94f3103da8ca7438d84e0344e453fe0ba3b7486e04c5bf7a9a3fabe9b69')


build() {
    cd ${_pkgname}-${pkgver}

    ./configure \
        --prefix='/usr'
    make
}

package() {
    cd ${_pkgname}-${pkgver}
    make DESTDIR="${pkgdir}" install
    rm -rf "${pkgdir}"/usr/{bin,include,lib/{pkgconfig,libtiff{,xx}.{a,so}},share}
    install -Dm644 ./doc/project/license.rst -t "${pkgdir}"/usr/share/licenses/${pkgname}
}
